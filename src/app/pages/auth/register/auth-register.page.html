<ion-header [attr.no-border]="isScrolledToTop ? true : null">
    <ion-toolbar color="dark">
        <ion-buttons slot="start">
            <ion-back-button (customClick)="back()"></ion-back-button>
        </ion-buttons>
        <ion-title>
            Register to Escape Room
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content backgroundImage
             fullscreen
             forceOverscroll="false"
             scrollEvents="true"
             padding-bottom
             #content
             (ionScroll)="onScroll($event)"
             [class.keyboard-visible]="keyboardVisible ? true : null"
>

    <form *ngIf="form && userService.user" [formGroup]="form" (ngSubmit)="submit()" action>
        <ion-card color="light">
            <ion-card-content class="light">

                <ion-label>Teamname</ion-label>
                <ion-item no-inner-padding>
                    <ion-input type="text"
                               formControlName="teamName"
                               [(ngModel)]="userService.user.teamName"
                    ></ion-input>
                    <ion-icon name="close"
                              color="danger"
                              slot="end"
                              [hidden]="form.controls.teamName.valid || !form.controls.teamName.touched"
                    ></ion-icon>
                </ion-item>

                <form-control-errors [control]="form.controls.teamName"
                                     [errorMessages]="validationMessages.teamName"
                                     margin-bottom
                ></form-control-errors>

                <ion-label>Group Number</ion-label>
                <ion-item no-inner-padding>
                    <ion-input type="text"
                               formControlName="groupNumber"
                               [(ngModel)]="userService.user.groupNumber"
                    ></ion-input>
                    <ion-icon name="close"
                              color="danger"
                              slot="end"
                              [hidden]="form.controls.groupNumber.valid || !form.controls.groupNumber.touched"
                    ></ion-icon>
                </ion-item>

                <form-control-errors [control]="form.controls.groupNumber"
                                     [errorMessages]="validationMessages.groupNumber"
                                     margin-bottom
                ></form-control-errors>

                <ion-label>Subcamp</ion-label>
                <ion-item no-inner-padding>
                    <ion-select
                                okText="Select"
                                cancelText="Cancel"
                                placeholder="Subcamp"
                                [(ngModel)]="userService.user.subCamp"
                                formControlName="subCamp"
                    >
                        <ion-select-option value="yellow">Yellost in Time</ion-select-option>
                        <ion-select-option value="red">Rusty Railroad</ion-select-option>
                        <ion-select-option value="orange">Orange Aviation Field</ion-select-option>
                        <ion-select-option value="green">Green Recycling Yard</ion-select-option>
                        <ion-select-option value="blue">Old Yellow</ion-select-option>
                    </ion-select>
                    <ion-icon name="close"
                              color="danger"
                              slot="end"
                              [hidden]="form.controls.subCamp.valid || !form.controls.subCamp.touched"
                    ></ion-icon>
                </ion-item>
                <form-control-errors [control]="form.controls.subCamp"
                                     [errorMessages]="validationMessages.subCamp"
                                     margin-bottom
                ></form-control-errors>

            </ion-card-content>
        </ion-card>
        <input type="submit" semi-hidden>

    </form>

</ion-content>

<ion-footer>

    <ion-toolbar color="dark">
        <ion-button color="primary"
                    expand="block"
                    [disabled]="submitting"
                    (click)="submit()"
        >
            <span [hidden]="submitting">Join the game</span>
            <ion-icon slot="end" name="arrow-forward"></ion-icon>
            <ion-spinner [hidden]="!submitting"></ion-spinner>
        </ion-button>
    </ion-toolbar>

</ion-footer>
